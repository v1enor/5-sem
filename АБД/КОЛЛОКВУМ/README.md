# КОЛЛОКВИУМ

### 1. Версия СУБД Oracle, в курсе .

Oracle 12C

### 2. Что входит в администрирование СУБД?

- Проектирование базы данных
- Восстановление работоспособности
- Обеспечение целостности
- Обеспечение безопасности в базе данных
- Оптимизация и поддержка производительности
- Мониторинг системы
- Обеспечение перехода на новую версию

### 3. Что собой представляет дистрибутив СУБД?

**Дистрибутив** (от анг. distribute перевод "распространять") - это установочный пакет программы, который содержит в себе все нужные компоненты.

### 4. Перечислите параметры, которые устанавливаются при инсталляции СУБД Oracle.

- Создать бд/установить софт для бд/обновить бд
- Desktop class/Server class
- Тип инсталляции
- Typical install/advanced install
- Параметры для нового юзера (имя, пароль)
- Имя бд
- Пароль администратора
- Создать ли cdb (если да, то ещё указать имя pdb)

### 5. Как проверить, установилась ли СУБД Oracle?

### ● Сервисы

### ● Список установленных программ

### ● Редактор реестра

### ● Установщик Universal Installer

### ● Пользователи и группы

### ● Соединение с базой данных

### 6. Как проверить, запущен ли сервер СУБД Oracle?

tnsping <имя хоста>

### 7. Что такое инстанс (экземпляр)?

● запущенный сервер (программа) СУБД Oracle

● общая (глобальная) область памяти (SGA – system global area) и др. системные области памяти

● фоновые процессы, предназначенные для управления файлами базы данных

### 8. Перечислите основных системных пользователей, которые создаются при установке.

SYS – предопределенный привилегированный пользователь ранга администратора базы данных, который является владельцем ключевых ресурсов БД Oracle

SYSTEM – предопределенный привилегированный пользователь, которому принадлежат ключевые ресурсы БД Oracle

### 9. Поясните разницу между этими пользователями.

SYS имеет привилегию SYSDBA, которая позволяет ему выполнять абсолютно все операции с максимумом привилегий.

SYSTEM может делать все, кроме бэкапа и восстановления бд. Для администрирования используется именно этот пользователь.

### 10. Какие приложения используются для взаимодействия с экземпляром?

SqlPlus, SqlDeveloper

### 11. Что такое словарь данных СУБД Oracle?

Словарь Oracle - набор таблиц и связанных с ними представлений, который представляет возможность отследить внутреннюю структуру  базы данных и деятельность СУБД Oracle

### 12. Как просмотреть все представления словаря данных?

SELECT  *  FROM  DICTIONARY;

### 13. Классифицируйте компоненты словаря данных.

- USER Объекты, принадлежащие пользователю
- ALL Объекты, к которым пользователь имеет доступ
- DBA Все объекты базы данных (для администратора БД)
- V$ Производительность сервера
- Прочие представления (DICTIONARY и пр.)

### 14. Кому доступны представления словаря dba_?

Администратору БД

### 15. Что такое инфраструктура базы данных?

Инфраструктура баз данных стандартно состоит из серверной части, отвечающей за обработку транзакций, и системы хранения данных (СХД), которая хранит сами данные и отвечает за их доступность и целостность.

### 16. Перечислите порядок действий при создании инфраструктуры базы данных.

- создание табличных пространств
- создание ролей
- назначение ролям системных привилегий
- создание профилей безопасности
- создание пользователей
- назначение пользователям ролей
- создание объектов базы данных
- назначение ролям объектных привилегий

### 17. Что такое табличное пространство?

Табличное пространство – логическая структура хранения данных, контейнер сегментов.

### 18. Перечислите параметры, указываемые при его создании.

путь к файлу,  тип (permanent, temporary, undo), начальный размер, размер автоматического расширения, максимальный размер, онлайн-статус, размер одного блока (2 – 32KB, число кратное двум), размер экстента, кол-во блоков в экстенте, управление экстентами, управление сегментами (auto, manual), тип BIGFILE, необходимость логина\пароля для использования

### 19. Какие имеются типы табличных пространств и для чего они применяются?

PERMANENT - хранение постоянных объектов БД

TEMPORARY - хранение временных данных

UNDO - хранение сегментов отката, используется всегда один

### 20. Назовите 2 имени табличных пространств, которые обязательны и создаются при инсталляции.

System, sysaux

### 21. С помощью какого SQL-оператора создается табличное пространство?

Create tablespace

### 22. В каком соотношении находятся табличные пространства и файлы данных?

С одним табличным пространством связаны один или несколько файлов операционной системы, с каждым файлом связано только одно табличное пространство.

### 23. Что такое квота?

Квота – размер дискового пространства, которое может использовать пользователь в выданном ему табличном пространстве.

1. **Какую операцию можно выполнить, если есть право на создание таблицы в табличном пространстве, но нет квоты?**

**Никакую, либо если была создана таблица до окончания квоты, то удаление**

### 25. Что такое роль?

**Роль –** именованный набор привилегий.

### 26. С помощью какого SQL-оператора создается роль?

**CREATE ROLE role_name [ NOT IDENTIFIED | IDENTIFIED {BY password | USING [schema.] package | EXTERNALLY | GLOBALLY } ;**

`role_name`

Наименование новой роли, которую вы создаете. Это как вы будете ссылаться на группировку привилегий.

`NOT IDENTIFIED`

Это означает, что роль немедленно включена. Не требуется ни один пароль, чтобы включить роль.

`IDENTIFIED`

Означает, что пользователь должен быть авторизован, прежде чем роль будет включена.

`BY password`

Это означает, что пользователь должен ввести пароль, чтобы включить роль.

`USING package`

Означает, что вы создаете роль приложения - роль, которая включена только в приложениях с использованием авторизованного пакета.

`EXTERNALLY`

Это означает, что пользователь должен быть авторизован внешним сервисом для включения роли. Внешний сервис может быть операционная система или сервис третьей сторона.

`GLOBALLY`

Означает, что чтобы включить роль, пользователь должен быть авторизован службой каталогов предприятия.

### 27. Что такое привилегия?

Привилегия — это право выполнять конкретный тип предложений SQL, или право доступа к объекту другого пользователя.

### 28. Какие бывают привилегии?

ORACLE имеет два   вида   привилегий: системные и объектные.

Системные (командные) привилегии– разрешают пользователю выполнять конкретную операцию базы данных.

Объектная привилегия означает то, что пользователь имеет привилегию выполнить данную команду только для определенного объекта базы данных

### 29. С помощью каких SQL-операторов привилегии назначаются роли?

Назначаются оператором GRANT

### 30. С помощью каких SQL-операторов привилегии отбираются у роли?

Отзываются оператором REVOKE

REVOKE DELETE ANY TABLE FROM pasowner

### 31. Какие привилегии есть у пользователя сразу после создания?

Которые есть в профиле помеченный как **DEFAULT(не уверена совсем)**

### 32. Кто может назначить привилегию?

Пользователь с опцией **ADMIN OPTION или GRANT OPTION**

### 33. Что такое ADMIN OPTION при назначении привилегий?

Если роль присваивается с использованием конструкции *WITH ADMIN OPTION*, получивший ее может выполнять следующие действия.

- Предоставлять роль или отзывать ее для любого пользователя или другой роли в базе данных.
- Предоставлять роль с использованием конструкции *WITH ADMIN OPTION*.
- Изменять или удалять роль.

### 34. Что такое GRANT OPTION при назначении привилегий?

**GRANT OPTION** Позволяет предоставлять права, которыми вы обладаете для других пользователей.

### 35. Что такое профиль безопасности?

**Профиль —** это коллекция атрибутов и, связанных с использованием ресурсов и паролей, которая может быть назначена пользователю. Профиль безопасности позволяет наложить индивидуальные ограничения Пользователю на использование ресурсов Oracle

### 36. Назовите атрибуты, которые можно указать в профиле.

PASSWORD_LIFE_TIME --Кол-во дней жизни пароля

SESSIONS_PER_USER --Кол-во одновременных сессий для пользователя

FAILED_LOGIN_ATTEMPTS --Кол-во попыток ввода пароля

PASSWORD_LOCK_TIME --Кол-во дней блокирования после ошибочного ввода пароля

PASSWORD_GRACE_TIME DEFAULT --Кол-во дней-предупреждений о смене пароля

PASSWORD_REUSE_TIME--Кол-во дней, через которы можно вернуть старый пароль

CONNECT_TIME --Кол-во мин. соединения

IDLE_TIME  --Кол-во мин. простоя

### 37. Для чего применяется профиль с именем DEFAULT?

- -Профиль **Default** назначается все пользователям, для которых не был назначен профиль при создании.
- Также в нем хранятся все значения по умолчанию, если какой-то параметр созданному профилю указать **DEFAULT**,
- -то значение возьмётся из профиля **DEFAULT**

**(Ну короче для того, чтобы этот профиль использовался по умолчанию для пользователей, в которых не назначен профиль)**

### 38. Что такое пользователь СУБД?

**Пользователь** – это человек, который подключается к пользовательскому аккаунту, устанавливая сессию к экземпляру базы данных.

### 39. Перечислите параметры пользователя, которые можно установить при его создании.

- имя пользователя
- наличие пароля и сам пароль, при необходимости
- табличное пространство по умолчанию
- временное табличное пространство по умолчанию
- лимит (квота) на табличное пространство
- профиль безопасности
- статус (open, locked, expired)

### 40. Как изменить пароль пользователя?

**Первый** **вариант:** ALTER USER user_name IDENTIFIED BY new_password;

**Второй** **вариант:**alter user user_name identified by new_password replace old_password ;

### 41. Как назначить пользователю привилегии?

Grant role_name to user_name;

GRANT privileges ON object TO user;

### 42. Как просмотреть привилегии пользователя, данные напрямую?

SELECT * FROM USER_SYS_PRIVS

### 43. Как просмотреть привилегии пользователя, данные через роль?

SELECT * FROM USER_ROLE_PRIVS;

### 44. Перечислите все этапы запуска инстанса. Поясните кратко каждый этап.

**Запуск**

**STARTUP NOMOUNT:** Запуск экземпляра Oracle без монтирования базы данных. Доступ пользователей запрещен. Используется для создания БД и пересоздания управляющих файлов;

**STARTUP MOUNT:** Запустить экземпляр, монтировать БД, но не запускать ее. Считан файл параметров. Происходит обращение к управляющим файлам. Проверяется состояние файлов БД. Доступ пользователей запрещен. Из состояния STARTUP NOMOUNT переводится ALTER DATABASE MOUNT;

**STARTUP OPEN:** Запустить экземпляр. Монтировать и открыть БД. Могут присоединяться пользователи. Из состояния STARTUP MOUNT переводится ALTER DATABASE OPEN.

### 45. Перечислите все этапы останова инстанса. Поясните кратко каждый этап.

**Остановка**

**SHUTDOWN NORMAL:** Запрещено создавать новые сессии. Ожидается завершение работы всех пользователей. Самый безопасный и долгий способ останова. Никаких восстановительных работ при следующем старте не проводится;

**SHUTDOWN TRANSACTIONAL:** Запрещено создавать новые сессии. Запрещено запускать новые транзакции. Сервер дожидается завершения уже начатых транзакций и отключает пользователей, не имеющих активных транзакций. Применяется в случаях, когда нет возможности применить NORMAL. Никаких восстановительных работ при следующем старте не проводится.

**SHUTDOWN IMMEDIATE:** Запрещено создавать новые сессии. Запрещено запускать новые транзакции. Все незафиксированные транзакции откатываются. Применяется в случаях, когда нет возможности ждать. Никаких восстановительных работ при следующем старте не проводится.

**SHUTDOWN ABORT:** Применяется в крайних случаях, когда остальные режимы останова не приводят к результату. Все действия прекращаются. Все транзакции не фиксируются и не откатываются. Пользователей отсоединяют от БД. При следующем старте будет выполнено возможное восстановление.

### 46. Напишите логическую архитектуру внешней памяти.

База данных → Табличное пространство → Сегмент → Экстент → Блок данных

### 47. Напишите физическую архитектуру внешней памяти.

Файлы, в которых хранятся все данные + блоки ОС.

### 48. Что такое сегмент?

Сегмент – область на диске, выделяемая под объекты.

### 49. Перечислите известные вам типы сегментов.

Сегменты типизируются в зависимости от типа данных, хранящихся в них:

- Table
- Table Partition
- Nested Table
- Index
- Index Partition
- Cluster
- Lobindex
- Lobsegment
- Lob Partition
- Rollback

Чисто для справки – для того, чтобы это посмотреть можно выполнить select-запрос:

**SELECT DISTINCT** **segment_type**

**FROM dba_segments;**

### 50. Сколько сегментов образуется при создании таблицы из одного столбца числового типа с установленным ограничением уникальности?

Сразу при создании таблицы сегмент не создается, однако, если добавить хотя бы 1 запись, то образуется 2 сегмента. Но ответ на вопрос всё же будет 0.

### 51. Что такое экстент?

Экстент - непрерывный фрагмент дисковой памяти.

### 52. Как узнать, все ли экстенты одного размера?

Если при создании табличного пространства была задана опция UNIFORM, то все экстенты будут одинакового размера.

### 53. Сколько экстентов образуется при создании таблицы из одного столбца числового типа с установленным ограничением уникальности, если данные в нее не добавлены?

****Если данные не добавлены, то 0.

### 54. Что такое блок табличного пространства?

Это минимальная единица объема памяти, применяемая при записи чтении данных

### 55. Как определить размер блока?

**SHOW PARAMETER db_block_size;**

### 56. Какая информация содержится в блоке?

**–**Заголовок–

–Каталог таблиц–

–Каталог строк–

–Свободное пространство–

–Данные–(Таблицы или индекса, например)

### 57. Может ли один экстент располагаться в двух табличных пространствах?

Нет.

### 58. Может ли один сегмент располагаться в двух табличных пространствах?

Нет.

### 59. Может ли один сегмент располагаться в двух файлах одного табличного пространства?

Да.

### 60. Может ли один экстент располагаться в двух файлах одного табличного пространства?

Нет.

### 61. Что происходит с сегментом таблицы, если таблица удаляется?

При удалении таблицы изменяется имя сегмента, и информация об удалении записывается в словарь данных (в RECYCLEBIN)

### 62. Что такое мультиарендность?

Архитектура ПО. В нашем случае - технология, позволяющая запустить несколько независимых баз данных в рамках одного экземпляра. При этом эти БД будут изолированы друг от друга.

### 63. Что такое CDB?

Контейнер базы данных.

### 64. Что такое PDB?

Pluggable Database - подключаемая БД.

### 65. В чем состоит назначение базы данных PDB$SEED?

Это шаблон, предоставляемый Ораклом, для создания новых PDB.

### 66. Как создать PDB?

Воспользоваться утилитой Oracle Database Configuration Assistant, где нужно будет выбрать Manage PDB → Create a PDB → далее выбрать нужные параметры.

Также через SQLPlus: CREATE PLUGGABLE DATABASE Название_pdb ADMIN USER SYSDBA IDENTIFIED BY PASSWORD FILE_NAME_CONVERT=('/opt/oracle/oradata/XE/pdbseed/','/opt/oracle/oradata/XE/GVE_PDB/' - способ говно

### 67. Как просмотреть список PDB?

**SHOW pdbs;**

ИЛИ

**SELECT * FROM v$pdbs;**

### 68. В каком состоянии PDB доступна для работы пользователей?

В состоянии STARTUP OPEN.

### 69. Что такое общий пользователь Oracle Multitenant?

- Юзер, который может действовать внутри : то есть во всех PDB и даже в CDB$ROOT
    
    всех контейнеров
    
- Его можно создать только в root контейнере
- Начинается с C##
- Рекомендуется в нем не создавать объекты

### 70. Каким образом общий пользователь может быть использован в PDB?

Например, если нужен юзер, который будет иметь доступ ко всем PDB и в каждой из них выполнять работу.

### 71. Какие есть еще общие объекты, кроме общего пользователя?

Общие табличные пространства, роли, привилегии(но это не точно)

Таблицы, Синонимы

### 72. Как именуется общий пользователь Oracle Multitenant?

Имя общего юзера обязательно начинается с C##.

### 73. Как выдать привилегии общему пользователю?

Необходимо указывать container=ALL: таким образом, все привилегии будут наследоваться для всех PDB.

*grant create session to C##TEST_USER container=ALL;*

### 74. Перечислите все типы файлов базы данных Oracle.

**Обязательные:**

- Управляющие файлы – ctl (имена и местоположения всех остальных файлов)
- Файлы данных – system01.dbf (тут хранятся все данные - таблицы, индексы, триггеры, etc.)
- Файлы параметров – init.ora, spfile.ora, pfile.ora (много важных параметров инстанса: версия, название инстанса, размер SGA и всех пулов, возможность создания PDB etc.)
- Файлы журналов повтора – Redo Log Files – redo.log (запись всех изменений бд, запись ведется в группы файлов, необходимы для отката транзакций)

**Необязательные файлы:**

- Архивные файлы журналов повтора – .arc (сюда пишется инфа из redo log files; архивы – самый мощный инструмент восстановления БД)
- Сообщений – Alert log – log.xml (логгирование вообще всех операций с БД в XML формате; это самый полный журнал проведенных операций)
- Паролей – pwdsid.ora (защита инфы о подключениях привилегированных юзеров, и управление этими подключениями)

### 75. Кратко поясните назначение файлов базы данных Oracle.

сука я уже выше всё расписал

### 76. Перечислите все типы файлов, применяемых для обслуживания экземпляра.

Файл параметров

### 77. Кратко поясните назначение файлов, применяемых для обслуживания экземпляра.

Файл параметров предназначен для хранения параметров экземпляра

### 78. Для чего применяется журналы повтора?

При изменении данных Оракл пишет эти изменения в журнал повтора (orcl/REDO01.log). Если все пиздякнется, то по ним можно восстановить данные: сначала восстановить последнюю резервную копию, а потом применить журналы повтора для полного восстановления бд. На бумаге с их помощью можно вообще отказаться от архивации, но это применимо только в разработке. Если так сделать на рабочем проекте, то будет пиздец.

### 79. Что записывается в журналы повтора?

В них записываются все изменения базы данных, созданные с помощью транзакции, для корректного восстановления транзакций. Записывается только инфа, в которой находился файл до транзакции. Не применяется для отката транзакций!!! (для отката существуют журналы отката). Напоминаю, что транзакции выполняются не только при begin tran/commit tran, но и при выполнении DDL-операторов.

### 80. Для чего создается несколько групп журналов повтора?

На случай, если у нас всё пиздякнется. Представьте, что вы используете ОДИН файл журнала повтора на случай, если бд упадет, и тут падает и этот файл, и все проебано. Для избежание этого существует мультиплексирование журналов повтора, и одинаковая инфа пишется одновременно в несколько файлов, называемых группами. Подробнее об этом в 86 вопросе

### 81. Поясните взаимодействие групп журналов повтора.

Процесс LGWR (тот самый, который пишет инфу в журнал повтора) просто будет писать ее в 2 или более файлов одновременно. Таким образом, под капотом, достигается мультиплексирование групп журналов повтора.

### 82. Как получить список групп журналов повтора?

SELECT * FROM V$LOG;

### 83. Для чего создается несколько файлов журналов повтора?

На случай, если всё пиздякнется, в том числе журнал повтора. А мы такие опа, нам похуй, у нас на другом диске такой же файл журналов повтора, ща все восстановим

### 84. Поясните взаимодействие файлов журналов повтора.

Файлы журналов используются циклически (1 => 2 => 3 => 1).

Они переключаются, если:

1. Был заполнен один из журналов; Тогда бд переключается на другой журнал, а данные из старого журнала записываются в архив журнала повторов
2. При ручном переключении: alter system switch logfile;

### 85. Как получить список файлов журналов повтора?

**SELECT** *

**FROM** V$LOGFILE;

### 86. Что означает термин мультиплексирование журналов повтора?

**Мультиплексирование:** Журналы повтора это конечно круто, но что, если наебнутся и они? Оракл заранее предугадал, что он пиздякнется везде, где только можно, и создал такую функцию, как мультиплексирование журналов повтора. Смысл в том, что две и более одинаковых копий журнала повтора могут поддерживаться в разных местах – в идеале, они размещаются на разных дисках. LGWR будет записывать данные одновременно в несколько журналов повтора – это и есть мультиплексирование. На картинку посмотрите

**Группы:** как раз при мультиплексировании два разных файла, в которых пишутся одни данные, называются группой. Во вьюхе V$LOG есть инфа об этом. На картинке redo01a и redo01b – это одна группа, да и ваще по картинке все понятно

### 87. Что такое SCN?

SCN — System change number — системный номер изменений в базе данных. Последовательность SCN можно просмотреть через вьюху V$LOG (столбец FIRST_CHANGE#). Эти номера SCN должны идти по порядку друг за другом при каждом изменении. Вообще это важнейшая вещь для восстановления БД, ведь как раз по номерам SCN можно определить, что и насколько далеко надо восстанавливать. Кайф в том, что номер SCN меняется при каждом изменении базы данных и пишется в журналы повтора.

### 88. Как определить, включено ли архивирование журналов повтора?

1. представление V$DATABASE (LOG_MODE = ARCHIVEMODE / NOARCHIVEMOD)
2. представление V$INSTANCE (ARCHIVER = STARTED / STOPPED)

### 89. Что и когда записывается в архивы журналов повтора?

В архивы пишется инфа из файлов журнала повтора – redo log files.

Инфа пишется в архив, если:

1. файл журналов повтора заполнен
2. произошло переключение на другой файл журналов повтора

### 90. Как получить список архивов?

Во вьюхе V$ARCHIVED_LOG есть вся необходимая информация: все архивы, их SCN номера, создатель, дата создания, etc.

### 91. Какую информацию содержат управляющие файлы СУБД Oracle.

Control files – файлы, содержащие имена (местоположение) основных физических файлов базы данных и некоторых параметров

Используются для поиска других файлов операционной системы;

Местоположение управляющих файлов экземпляр получает из файла параметров.

По умолчанию для надежности создается 2 управляющих файла. Можно создать больше.

### 92. Как изменить управляющие файлы СУБД Oracle?

Остановить Oracle (shutdown transactional или immediate);

Скопировать один из управляющих файлов;

Изменить параметр CONTROL_FILES в файле параметров;

Стартовать Oracle (startup open).

### 93. Для чего применяется файл параметров?

Файл параметров предназначен для хранения параметров экземпляра(По лекции)

### (Не по лекции) Файлы параметров используются для конфигурирования действий Oracle предже всего при старте. Для того, чтобы запустить экземпляр базы данных, Oracle должен прочесть файл параметров и определить, какие параметры инициализации установлены для этого экземпляра

### 94. Как определить местонахождение файла параметров?

Открыть “Редактор реестра”-> папку “Software”-> папку ”Oracle”-> папку “KEY_OraDB12Home1”  и имя ORACLE_HOME содержит путь к файлу параметров

### 95. В каких форматах может быть файл параметров?

( 1-pfile,2-Spfile)

- Текстовый
- Бинарный

.ora (ну я думал это формат но редачится в текстовике или бинарном)

### 96. Поясните назначение опции SCOPE=SPFILE.

Значит, что при редактировании будет изменяться файл Spfile

PFILE: изменить SPFILE, значение параметра будет применено при следующем запуске экземпляра

### 97. Как изменить параметры экземпляра?

на Alter system set (изменение параметра) scope=both

(Внизу установили сколько курсоров можно открывать)

### 98. Расшифруйте аббревиатуру SGA.

на System Global Area

SGA также называют разделяемой глобальной областью. Она используется для хранения информация из базы данных, которая разделяется процессами базы данных

### 99. Перечислите основные области SGA и укажите, размер каких областей может изменяться динамически.

Разделяемый пул Большой пул Буферный пул Буфер журнала повтора Пул Java Фиксированная область SGA *Динамически могут изменяться*: Разделяемый пул, Большой, Буферный, Журнала повтора,

### 100. Кратко поясните назначение областей SGA.

- **Буферный кэш базы данных. Хранит копии блоков данных, прочитанных из файлов данных.**
- **Разделенный пул. Содержит библиотечный кэш для хранения разобранного SQL и PL/SQL кода, готового к использованию всеми пользователями. Он также содержит кэш словаря данных, который хранит всю информацию словаря.**
- **Буфер журнала повторного выполнения. Содержит информацию, необходимую для восстановления изменений, проведенных в базе данных операциями DML (языка манипулирования данными). Эта информация затем записывается в журналы повторного выполнения писателем журналов.**
- **Пул Java. Представляет пространство «кучи» для создания объектов Java.**
- **Большой пул. Хранит крупные выделения памяти, такие как резервные буферы RMAN.**
- **Пул потоков. Поддерживает средство Oracle Streams (средство для репликации данных между базами данных).**

### 101. Для чего применяется буферный кэш?

Буферный пул (буферный кэш) хранит блоки данных табличных пространств

Блок – единица обмена  информацией между оперативной памятью и диском

С каждым блоком связан счетчик использования

Списки блоков упорядочены по количеству обращений к блоку

### 102. Поясните назначение пулов KEEP, RECYCLE и DEFAULT буферного кэша.

KEEP-Постоянно хранит блоки данных в памяти. У вас могут быть маленькие таблицы, к которым выполняются частые обращения и для предотвращения их удаления из буферного кэша им можно назначить постоянный буферный пул при создании таблицы.

RECYCLE-Удаляет данные из кэша немедленно после использования. Этот буферный пул следует применять осторожно, если вы вообще решите использовать его. Повторно используемый буферный пул удаляет объект из кэша сразу по завершении транзакции. Очевидно, что его следует применять только для крупных таблиц, обращение к которым осуществляется нечасто, и которые не нужно хранить в кэше неопределенно долго.

default-Содержит все данные и объекты, которые не назначены в постоянный и повторно используемый буферные пулы

### 103. Поясните принцип работы алгоритма LRU.

Алгоритм LRU (least recently used)– первыми вытесняются блоки с наименьшим значением счетчика

### 104. В каком операторе можно указать пул буферного кэша, который будет применяться для кэширования таблицы?

Create

### 105. Что произойдет, если для таблицы указать параметр CAСHE?

CACHE – помещение таблицы в конец LRU-списка (для малых таблиц) обычно в default pool

### 106. Для чего применяется буфер журналов повтора?

Буфер журнала повторного выполнения предназначен для временного циклического хранения данных журнала повтора

Позволяет ускорить работу сервера за счет буферизации

### 107. Когда блоки буфера журналов повтора записываются в журнал?

По заполнению всех файлов оперативного журнала повтора происходит возврат к первому файлу журнала и начинается замена его содержимого новыми данны­ми транзакции. Если база данных работает в режиме ARCHIVELOG, перед пере­записью она сделает копию файлов оперативного журнала повтора. Затем эти архивированные файлы журнала повтора можно использовать для восстановле­ния любой части базы данных в любой момент времени

### 108. Для чего применяется разделяемый пул SGA?

Разделяемый пул (shared pool) используется в базе данных Oracle для хранения следующей информации:

- информации о последних выполненных командах SQL
- информации из словаря данных, к которая недавно запрашивалась

### 109. Какая информация хранится в разделяемом пуле SGA?

Библиотечный кэш

Разделяемую область SQL

Кэш словаря данных

Управляющие структуры

### 110. Для чего применяется большой пул SGA?

Большой пул  - область памяти SGA, применяемая для хранения больших фрагментов памяти

В этой области не применяется вытеснение по алгоритму LRU

память становится свободной сразу после того, как перестает использоваться

аналог RECYCLE (разделяемый пул – KEEP)

хранятся данные при резервном копировании (RMAN), специальные области UGA и пр.

### 111. Для чего применяется Java-пул SGA?

Java-пул предназначен для работы Java-машины;

### 112. Что такое сервис?

Сервисы — это дискретные программные компоненты, предоставляющие определенную функциональность и используемые в составе многих приложений

### 113. Какие виды процессов вы знаете?

Серверные процессы – процессы, выполняющиеся на основании клиентского запроса

Фоновые процессы – запускаются вместе с базой данных и выполняют разнообразные задачи обслуживания

Подчиненные процессы – аналогичны фоновым, но выполняют дополнительные действия для фонового или серверного процессов

### 114. Поясните назначение фонового процесса LREG.

Listener Registration Process **–** периодическая регистрация сервисов в процессе Listener

Фоновый процесс LREG считывает имена и параметры зарегистрированных сервисов экземпляра, регистрирует их в Listener, и если Listener не обнаружен, то попытки регистрации периодично повторяются.

### 115. Перечислите фоновые процессы, обеспечивающие запись грязных блоков на диск?

DBWn

### 116. Как просмотреть список работающих фоновых процессов?

SELECT * FROM v$BGPROCESS

WHERE paddr != hextoraw('00');

### 117. Что такое серверный процесс?

Серверные процессы – процессы, выполняющиеся на основании клиентского запроса.

### 118. Как просмотреть список работающих серверных процессов?

*SELECT * FROM v$services*

Или вместо *** - *name, network_name, pdb*

### 119. Поясните назначение утилиты lsnrctl.

*lsnrctl* – утилита управления процессом Listener.

### 120. Перечислите основные команды утилиты lsnrctl.

*START* - запуск listener-а

*STOP* - остановка listener-а

*STATUS* - просмотр состояния listener-а

*SERVICES* - отобразить сервисы доступны listener-у (более детальная информация чем в команде *STATUS*)

*VERSION* - отобразить версию listener-а

*RELOAD* - перечитать файл ora

*SAVE_CONFIG* - сохранить изменения в файл listener.ora

*TRACE* - разрешить трассировку деятельности listener-а

*CHANGE_PASSWORD* - установить пароль для администрирования listener-а

*QUIT* - выйти из программы без сохранения

*EXIT* - выйти из программы сохранив изменения

*SET* - установить значения параметров, таки как примеру время ожидания ответа

*SHOW* - отобразить значения установленных параметров

### 121. Что такое дескриптор соединения?

Дескриптор соединения – объединенная спецификация двух обязательных компонентов подключения к базе данных:

- Имени службы базы данных,
- Местоположения адреса базы данных.

### 122. Что такое идентификатор соединения?

Именованный дескриптор соединения.

### 123. Какие бывают виды соединения по сети клиента с сервером Oracle?

Basic, TNS, LDAP, Local/bequeath

### 124. Кратко опишите процесс установления соединения.

Когда пользователь хочет подключиться к БД используется строка подключения.

### 125. Поясните назначение процесса Oracle Net Listener.

Oracle Net – программный компонент, который инициализирует, устанавливает и поддерживает подключения между клиентом и сервером.

*Oracle Net Manager* же позволяет управлять всеми подключениями.

### 126. Как называется конфигурационный файл Oracle Net Listener?

listener.ora

### 127. Кратко поясните принцип работы Oracle в режимах выделенного и разделяемого сервера.

*Выделенный сервер* - каждому пользователю выделяется отдельный сервер для работы с БД. *Разделяемый* - новый пользовать становится в очередь и если есть свободный разделяемый сервер, то он к нему подключается (запросы клиента и ответы сервера обрабатываются dispatcher-ом).

### 128. Каково назначение процесса dispatcher Oracle?

Dispatcher помещает запрос клиента в очередь запросов в SGA (это одно из многих назначений области SGA). Первый же свободный разделяемый сервер выберет и обработает этот запрос. По завершении выполнения команды разделяемый сервер поместит ответ в очередь ответов. Процесс-диспетчер (dispatcher) следит за очередью и немедленно передает полученный результат клиенту.

### 129. Как называются конфигурационные файлы для настройки сети?

*sqlnet.ora*, *tnsnames.ora*

### 130. Что содержится в конфигурационных файлах для настройки сети?

*Sqlnet.ora* - информацию, что используется для настройки соответствующих параметров клиента для подключения к серверу Oracle.

*Tnsnames.ora* - информацию, что используется для режима соединения TNS, который представляет собой режим удаленного соединения через сеть.

### 131. Как получить список всех объектов пользователя?

*SELECT **

*FROM user_objects;*

### 132. Как получить список всех таблиц, к которым имеет доступ пользователь?

*SELECT * FROM all_tables;*

### 133. В каком табличном пространстве создается временная таблица?

Во временном, указанном при создании пользователя в параметре *temporary tablespace.* Если не указано явно, то по умолчанию TEMP.

### 134. Напишите синтаксис создания временной таблицы.

![Untitled](%D0%9A%D0%9E%D0%9B%D0%9B%D0%9E%D0%9A%D0%92%D0%98%D0%A3%D0%9C/Untitled.png)

![Untitled](%D0%9A%D0%9E%D0%9B%D0%9B%D0%9E%D0%9A%D0%92%D0%98%D0%A3%D0%9C/Untitled%201.png)

![Untitled](%D0%9A%D0%9E%D0%9B%D0%9B%D0%9E%D0%9A%D0%92%D0%98%D0%A3%D0%9C/Untitled%202.png)

![Untitled](%D0%9A%D0%9E%D0%9B%D0%9B%D0%9E%D0%9A%D0%92%D0%98%D0%A3%D0%9C/Untitled%203.png)

![Untitled](%D0%9A%D0%9E%D0%9B%D0%9B%D0%9E%D0%9A%D0%92%D0%98%D0%A3%D0%9C/Untitled%204.png)

Но Блинова давала на основе примера в лекции:

![Untitled](%D0%9A%D0%9E%D0%9B%D0%9B%D0%9E%D0%9A%D0%92%D0%98%D0%A3%D0%9C/Untitled%205.png)

### 135. Сколько доступны данные во временной таблице?

В зависимости от параметра ON COMMIT PRESERVE|DELETE ROWS

при создании таблицы. Если *PRESERVE*, то на протяжении сеанса, если *DELETE* - на протяжении транзакции (как только транзакция фиксируется или откатывается, данные из этой таблицы удаляются).

### 136. Можно ли двум пользователям работать с одной и той же временной таблицей?

ДА

(Разные пользователи могут обращаться к одной и той же временной таблице, причем каждый из них видит данные только своего собственного сеанса)

### 137. Можно ли использовать ограничения целостности для временных таблиц?

ДА

### 138. Чем отличается временная таблица в Oracle от временных таблиц в SQL Server?

Временная таблица в **Oracle** - **постоянный** **объект**, содержащий временные данные, которые являются локальными для сеанса                 Временная таблица в **SQL** - **временный** **объект**

### 139. Поясните разницу между типами данных CHAR/ NCHAR/ VARCHAR2/ NVARCHAR2.

**char** - хранит символьно или в байтах

**nchar** - хранит только символьно

**char/nchar:** фиксированная длина

**char/varchar2**:

- Разные базовые типы: char - character, varchar2 - string
- Заполнение пробелов: char - заполнение пробелов до максимального размера, varchar2 - символьные значения присваиваются без именений
- Сравнение значений: “Если один или оба значения - varchar2/nvarchar2, то используется семантика без добавления, иначе - с заполнением пробелов”

### 140. Какой тип данных используется для хранения даты?

Если нужен только один тип:

**date** - дата и время

### 141. Перечислите типы данных для хранения интервалов.

interval day to second

interval year to month

### 142. Поясните, какое максимальное значение можно записать в тип данных NUMBER (4, 6)?

0.009

### 143. Поясните, какое максимальное значение можно записать в тип данных NUMBER (4, -2)?

100000

### 144. Поясните, какое максимальное значение можно записать в тип данных NUMBER (2, 1)?

9.9

### 145. Какие типы данных используются для хранения больших данных?

**long** - символьный, переменной длины, до 2GB

**long raw** - бинарные до 2GB

**clob** - символьный тип большой обхект до 4GB

**nlob** - clob для многобайтных символов

**blob** - большой двоичный объект до 4GB

### 146. Что собой представляет тип ROWID?

16-тиричный тип для уникального определения любой таблицы в БД

(или же двоичное значение, которое точно идентифицирует строку данных в таблице, даже если та не имеет уникального ключа)

### 147. Что такое NLS_LANG?

Переменная окружения, обозначает, какие параметры nls следует использовать для текущего сеанса

### 148. Из каких частей состоит NLS_LANG?

language_territory.charset

language - язык(имена месяцев, дней, направление текста, сокращения) default - AMERICAN

territory - территория(настройки календаря, формат даты, формат денежной единицы)

charset - набор символов( отображение и конвертация заглавных букв, порядок замещения символов при преобразовании - кодовая страницы)

### 149. Что такое последовательность?

Объект бд, предназначенный для генерации числовой последовательности

### 150. Перечислите основные параметры последовательности?

minvalue {integer}/nominvalue

maxvalue {integer}/nomaxvalue

start with {integer}

increment by {integer}

cache {value}/nocache

cycle/nocycle

order/noorder

### 151. Как получить следующее значение последовательности?

select sequence_name.nextval from dual

### 152. Как получить текущее значение последовательности?

select sequence_name.currval from dual

### 153. Где действительно текущее значение последовательности?

Не уверен, что тут должно быть

Текущее значение действительно до того момента, пока не возьмут следующее или же не удалят последовательность

### 154. Что такое Oracle Identity?

Столбец, для которого бд будет автоматически генерировать значение по заданным параметрам

### 155. Какие виды Oracle Identity существуют?

**generated always as identity** - значение определяется только сервером

**generated by default as identity** - позволяет указать значение, если таковое не указано, то сервер назначит из последовательности

**generated by default on null as identity** - позволяет указать значение. Если значение в столбце не указано или явно указать значение NULL, то сервер назначит значение из последовательности.

### 156. Как получить список всех последовательностей пользователя?

select * from user_sequences;

### 157. Что такое кластер?

Объект базы данных, используемый для физически совместного хранения одной или нескольких таблиц, которые часто соединяются вместе в SQL-запросах.

### 158. Перечислите основные параметры кластера?

size

tablespace

hashkeys

storage

### 159. Поясните, как создаются объекты кластера?

create cluster название_кластера

(название_поля тип)

параметры

При создании таблицы после закрывающей скобки пишем

cluster название(поле_таблицы)

### 160. Для чего предназначен хэш-кластер?

Хэш-кластеры используют функции хэширования кластерного ключа строки для определения физической локализации места, где строку следует хранить

### 161. Как получить список всех кластеров пользователя?

select * from user_clusters;

### 162. Ускоряет ли наличие кластерных столбцов DML операции?

Да

### 163. Чем материализованное представление отличается от обычного?

Обычное представление - объект базы данных, который хранит именованный запрос.

Материализованное представление - физический объект базы данных, который хранит именованный запрос и результат выполненного запроса.

### 164. Перечислите основные параметры материализованного представления?

(build immediate | start with) - показывает время создания представления.

next - показывает время следующего ребилда(обновления)  представления.

refresh (complete | fast | force) - способы обновления представления.

refresh complete  on (commit | demand) - обновление явное\не явное.

enable query rewrite - подключение механизма переписывания запроса.

### 165. Что такое механизм переписывания запросов?

Механизм переписывания запросов - методика оптимизации запросов, которая преобразовывает пользовательский запрос, написанный на SQL, чтобы он выполнялся быстрее за счет выборки данных из материализованного представления.

### 166. Перечислите варианты обновления данных в представлении?

refresh complete - полное обновление представления.

refresh fast - обновляет по журналу фиксаций изменений базовых таблиц.

refresh force - если возможно выполнить `refresh fast`, если не то `refresh complete`.

on commit - обновление по коммиту.

on demand - обновление по требованию (через промежутки времени).

### 167. Как получить список всех пользователя?

select * from all_users;

### 168. Как получить список всех материализованных представлений пользователя?

select * from user_mviews;

### 169. Что такое связь базы данных?

Database Link(связь БД) - объект базы данных, предназначен для доступа к объектам базы данных, управляемой другим сервером.

### 170. Какие виды связей базы данных вам известны?

Private Database Link, Public Database Link

### 171. Как обратиться к удаленной таблице, используя связь базы данных?

select * from test@anotherdb - пишется @<db_name>

### 172. Как получить список всех связей базы данных, доступных пользователю?

select * from user_db_links;

### 173. Что такое синоним?

Синоним - способ обращения к объекту базу данных, без указания полной идентификации.

### 174. Чем публичный синоним отличается от обычного?

Публичный - общедоступным для всех пользователей базы данных.

Частный(обычный) - принадлежащий одному пользователю

### 175. Как получить список всех синонимов, доступных пользователю?

select * from user_synonyms;

### 176. Что такое индекс?

Индекс - структура (объект) базы данных, используемый сервером для быстрого поиска строки в таблице.

### 177. Для чего предназначен B-Tree индекс?

B-Tree индекс предназначен для ускорения поиска уникальной строки в таблице, с высокой селективностью.

### 178. Для чего предназначен bitmap индекс?

Bitmap предназначен для ускорения поиска строки, в столбце с низкой селективностью (маленькой уникальностью строчных значений), не подходит для таблиц с частым обновлением. Хорошо подходит для хранилищ данных.

### 179. Как создается bitmap индекс?

create bitmap index <index_name> on <table_name>(<column_name>);

### 180. Как получить список всех индексов пользователя?

select * from user_indexes;

я лох

ик

пук

рыг

Так на коллоке не пишите

Здесь может быть одно из (complete | fast | force)